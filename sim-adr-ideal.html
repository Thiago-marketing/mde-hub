<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simulador de Tarifa Ideal (ADR Ideal) ‚Ä¢ MDE Hub</title>
  <link rel="stylesheet" href="/css/app.css" />
</head>

<body class="page">

  <!-- TOPO -->
  <header class="topbar">
    <div class="user-info">
      <span id="userInitial">U</span>
      <div>
        <p id="userName">Carregando usu√°rio...</p>
        <p id="userEmail"></p>
      </div>
    </div>

    <div class="topbar-actions">
      <a href="/simuladores.html" class="btn-secondary btn-small">‚Üê Voltar</a>
      <button id="toggleThemeBtn" class="btn-secondary btn-small">üåì Tema</button>
      <button id="logoutBtn" class="btn-sair">Sair</button>
    </div>
  </header>

  <!-- MENU LATERAL -->
  <aside class="sidebar">
    <h3>Opera√ß√£o</h3>
    <nav>
      <a href="/dashboard.html">Dashboard</a>
      <a href="/reservas.html">Reservas</a>
      <a href="/checkin.html">Check-in</a>
      <a href="/checkout.html">Check-out</a>
      <a href="/lancamentos.html">Lan√ßamentos</a>
      <a href="/financeiro.html">Financeiro</a>
      <a href="/relatorios.html">Relat√≥rios</a>
      <a href="/uhs.html">UHs</a>
      <a href="/config.html">Configura√ß√µes</a>
    </nav>

    <h3>Ferramentas</h3>
    <nav>
      <a href="/leads.html">Leads</a>
      <a href="/premium.html">Plano Premium</a>
      <a href="/simuladores.html" class="active">Simuladores</a>
    </nav>
  </aside>

  <!-- CONTE√öDO -->
  <main class="content">
    <section class="page-header">
      <h1>Simulador de Tarifa Ideal (ADR Ideal)</h1>
      <p class="muted">
        Descubra qual deve ser a sua di√°ria m√©dia (ADR) para atingir a meta de faturamento desejada.
      </p>
    </section>

    <section class="grid grid-2">

      <!-- FORMUL√ÅRIO -->
      <form id="simADR" class="card">
        <div class="card-header">
          <h2>Dados da hospedagem</h2>
        </div>

        <div class="card-body form-grid">

          <div class="form-group">
            <label for="uhCount">N¬∫ de quartos (UH)</label>
            <input type="number" id="uhCount" min="1" required placeholder="Ex: 20" />
          </div>

          <div class="form-group">
            <label for="occupancy">Ocupa√ß√£o m√©dia (%)</label>
            <input type="number" id="occupancy" min="0" max="100" required placeholder="Ex: 65" />
          </div>

          <div class="form-group">
            <label for="currentAdr">ADR atual (R$)</label>
            <input type="text" id="currentAdr" required placeholder="Ex: 280,00" />
          </div>

          <div class="form-group">
            <label for="targetFat">Meta de faturamento mensal (R$)</label>
            <input type="text" id="targetFat" required placeholder="Ex: 120.000,00" />
          </div>

        </div>

        <div class="card-footer">
          <button type="submit" class="btn btn-primary btn-full">
            Calcular ADR Ideal
          </button>
        </div>
      </form>

      <!-- RESULTADO -->
      <section id="resultCard" class="card" style="display: none;">
        <div class="card-header">
          <h2>Resultado da simula√ß√£o</h2>
        </div>

        <div class="card-body">

          <h3>üéØ ADR Ideal</h3>
          <p><strong>Tarifa m√≠nima necess√°ria:</strong> <span id="adrIdeal"></span></p>

          <hr />

          <h3>üìä Compara√ß√£o com sua tarifa atual</h3>
          <p><strong>ADR atual:</strong> <span id="adrAtual"></span></p>
          <p><strong>Diferen√ßa necess√°ria:</strong> <span id="difAdr"></span></p>

          <div id="recomendacao" class="highlight-box"></div>

        </div>

        <div class="card-footer">
          <button id="whatsBtn" class="btn btn-success btn-full">
            Receber an√°lise no WhatsApp
          </button>
          <p class="muted small">
            Enviado para o WhatsApp oficial da MDE (+55 11 94027-7447).
          </p>
        </div>
      </section>

    </section>
  </main>


<script>
  function parseBRL(value) {
    if (!value) return 0;
    return parseFloat(value.replace(/\./g, '').replace(',', '.')) || 0;
  }

  function formatBRL(v) {
    return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(v || 0);
  }

  const form = document.getElementById("simADR");
  const resultCard = document.getElementById("resultCard");

  const adrIdealEl = document.getElementById("adrIdeal");
  const adrAtualEl = document.getElementById("adrAtual");
  const difAdrEl = document.getElementById("difAdr");
  const recomendacaoEl = document.getElementById("recomendacao");

  const whatsBtn = document.getElementById("whatsBtn");

  let lastSim = null;

  form.addEventListener("submit", function(e) {
    e.preventDefault();

    const uh = parseInt(document.getElementById("uhCount").value);
    const occ = parseFloat(document.getElementById("occupancy").value);
    const currentAdr = parseBRL(document.getElementById("currentAdr").value);
    const target = parseBRL(document.getElementById("targetFat").value);

    const dias = 30;
    const roomNights = uh * (occ / 100) * dias;

    const adrIdeal = target / roomNights;
    const dif = adrIdeal - currentAdr;

    adrIdealEl.textContent = formatBRL(adrIdeal);
    adrAtualEl.textContent = formatBRL(currentAdr);
    difAdrEl.textContent = formatBRL(dif);

    let mensagem = "";

    if (adrIdeal <= currentAdr) {
      mensagem = `
        <p><strong>Excelente!</strong> Sua tarifa atual j√° √© suficiente para atingir a meta informada.</p>
        <p>Com melhor distribui√ß√£o direta e menos OTA, voc√™ pode superar essa meta facilmente.</p>
      `;
    } else if (dif <= 40) {
      mensagem = `
        <p><strong>Voc√™ est√° muito perto!</strong></p>
        <p>Basta um ajuste leve na tarifa e otimiza√ß√£o dos canais para alcan√ßar a meta.</p>
      `;
    } else {
      mensagem = `
        <p><strong>Aten√ß√£o!</strong></p>
        <p>Ser√° necess√°rio um aumento mais significativo na ADR ou aumento na ocupa√ß√£o.</p>
        <p>A MDE pode ajudar a melhorar reservas diretas e distribui√ß√£o.</p>
      `;
    }

    recomendacaoEl.innerHTML = mensagem;

    resultCard.style.display = "block";

    lastSim = {
      uh, occ, currentAdr, target, adrIdeal, dif
    };
  });

  whatsBtn.addEventListener("click", function() {
    if (!lastSim) return;

    const msg = `
Simula√ß√£o ADR Ideal - MDE

UH: ${lastSim.uh}
Ocupa√ß√£o: ${lastSim.occ}%
ADR atual: ${formatBRL(lastSim.currentAdr)}
Meta mensal: ${formatBRL(lastSim.target)}

ADR Ideal necess√°rio: ${formatBRL(lastSim.adrIdeal)}
Diferen√ßa: ${formatBRL(lastSim.dif)}

Solicito an√°lise completa.
    `.trim();

    window.open("https://wa.me/5511940277447?text=" + encodeURIComponent(msg), "_blank");
  });
</script>

<script src="/js/theme.js"></script>
<script src="/js/app.js"></script>
</body>
</html>
